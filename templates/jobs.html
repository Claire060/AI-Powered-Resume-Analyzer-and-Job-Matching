<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Job Listings | CVision</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #2563eb;
      --primary-dark: #1e40af;
      --primary-light: #93c5fd;
      --secondary: #10b981;
      --secondary-dark: #059669;
      --gray-50: #f9fafb;
      --gray-100: #f3f4f6;
      --gray-200: #e5e7eb;
      --gray-300: #d1d5db;
      --gray-700: #374151;
      --gray-900: #111827;
      --danger: #ef4444;
      --warning: #f59e0b;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background-color: var(--gray-100);
      color: var(--gray-900);
      line-height: 1.6;
    }

    /* Navbar */
    .navbar {
      background: var(--primary);
      padding: 15px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .logo img {
      height: 100px;
      vertical-align: middle;
    }

    .navbar .links {
      display: flex;
    }

    .navbar .links a {
      color: white;
      text-decoration: none;
      margin: 0 15px;
      font-weight: 500;
      transition: all 0.3s ease;
      padding: 8px 12px;
      border-radius: 4px;
    }

    .navbar .links a:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    .navbar .links a.active {
      background: rgba(255, 255, 255, 0.2);
    }

    /* Fixed Auth Buttons */
    .navbar .auth-buttons {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .navbar .auth-buttons button {
      background: white;
      color: var(--primary);
      border: none;
      padding: 8px 16px;
      border-radius: 25px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 500;
      font-family: 'Poppins', sans-serif;
      font-size: 0.9rem;
    }

    .navbar .auth-buttons button:hover {
      background: var(--gray-200);
      transform: translateY(-2px);
    }

    .navbar .auth-buttons button.signup {
      background: var(--secondary);
      color: white;
    }

    .navbar .auth-buttons button.signup:hover {
      background: var(--secondary-dark);
    }

    .navbar .auth-buttons button.post-job {
      background: var(--warning);
      color: white;
    }

    .navbar .auth-buttons button.post-job:hover {
      background: #d97706;
    }

    .mobile-menu-btn {
      display: none;
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
    }

    /* Dropdown Menu */
    .dropdown {
      position: relative;
      display: inline-block;
    }

    .dropdown-toggle {
      color: white;
      text-decoration: none;
      margin: 0 15px;
      font-weight: 500;
      padding: 8px 12px;
      border-radius: 4px;
      cursor: pointer;
      display: flex;
      align-items: center;
    }

    .dropdown-toggle:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    .dropdown-toggle i {
      margin-left: 5px;
      transition: transform 0.3s ease;
    }

    .dropdown-menu {
      position: absolute;
      top: 100%;
      left: 0;
      background: white;
      min-width: 200px;
      border-radius: 8px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      z-index: 9999;
      opacity: 0;
      visibility: hidden;
      transform: translateY(10px);
      transition: all 0.3s ease;
    }

    .dropdown-menu.show {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .dropdown-item {
      display: block;
      padding: 12px 20px;
      text-decoration: none;
      transition: all 0.3s ease;
      border-bottom: 1px solid var(--gray-100);
      color: var(--gray-900);
    }

    .dropdown-item:last-child {
      border-bottom: none;
    }

    .dropdown-item:hover {
      background-color: var(--primary-light);
    }

    .user-info {
      display: none;
      align-items: center;
      gap: 10px;
      color: white;
    }

    .user-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: rgba(255,255,255,0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
    }

    .user-role {
      font-size: 0.8rem;
      opacity: 0.8;
    }

    /* Show/hide elements based on user state */
    .user-logged-in .auth-buttons {
      display: none;
    }

    .user-logged-in .user-info {
      display: flex;
    }

    .user-employer .post-job-btn,
    .user-employer .employer-section {
      display: block;
    }

    .user-jobseeker .post-job-btn,
    .user-jobseeker .employer-section {
      display: none;
    }

    /* Main Container */
    .main-container {
      max-width: 1200px;
      margin: 30px auto;
      padding: 0 20px;
    }

    /* Page Header */
    .page-header {
      text-align: center;
      margin-bottom: 30px;
    }

    .page-header h1 {
      color: var(--primary);
      font-size: 2.5rem;
      margin-bottom: 10px;
    }

    .page-header p {
      color: var(--gray-700);
      font-size: 1.1rem;
      max-width: 600px;
      margin: 0 auto;
    }

    /* Employer Section */
    .employer-section {
      background: linear-gradient(135deg, #2563eb, #1e40af);
      color: white;
      padding: 40px;
      border-radius: 12px;
      margin-bottom: 30px;
      text-align: center;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    .employer-section h2 {
      font-size: 2rem;
      margin-bottom: 15px;
    }

    .employer-section p {
      font-size: 1.1rem;
      margin-bottom: 25px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    .post-job-btn {
      background: white;
      color: var(--primary);
      border: none;
      padding: 12px 30px;
      border-radius: 25px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    .post-job-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(0,0,0,0.2);
    }

    /* Filters Section */
    .filters {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
      margin-bottom: 30px;
    }

    .filters h2 {
      margin-bottom: 15px;
      color: var(--gray-900);
      font-size: 1.2rem;
    }

    .filter-options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
    }

    .filter-group {
      display: flex;
      flex-direction: column;
    }

    .filter-group label {
      font-weight: 500;
      margin-bottom: 8px;
      color: var(--gray-700);
    }

    .filter-group select, .filter-group input {
      padding: 10px 15px;
      border: 1px solid var(--gray-300);
      border-radius: 6px;
      font-family: 'Poppins', sans-serif;
    }

    .search-box {
      display: flex;
      margin-top: 20px;
    }

    .search-box input {
      flex-grow: 1;
      padding: 12px 15px;
      border: 1px solid var(--gray-300);
      border-radius: 6px 0 0 6px;
      font-family: 'Poppins', sans-serif;
    }

    .search-box button {
      background: var(--primary);
      color: white;
      border: none;
      padding: 0 20px;
      border-radius: 0 6px 6px 0;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .search-box button:hover {
      background: var(--primary-dark);
    }

    /* Job Listings */
    .job-listings {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }

    .job-card {
      background: white;
      border-radius: 12px;
      padding: 25px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
      height: 100%;
      position: relative;
    }

    .job-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.12);
    }

    .job-card.featured {
      border-left: 4px solid var(--secondary);
    }

    .job-card.expired {
      opacity: 0.7;
      background-color: var(--gray-100);
    }

    .job-card.expired::after {
      content: "EXPIRED";
      position: absolute;
      top: 10px;
      right: 10px;
      background: var(--danger);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 0.7rem;
      font-weight: bold;
    }

    .job-card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 15px;
    }

    .job-title {
      color: var(--primary);
      font-size: 1.3rem;
      margin-bottom: 5px;
    }

    .company {
      color: var(--gray-700);
      font-weight: 500;
      margin-bottom: 10px;
    }

    .featured-badge {
      background: var(--secondary);
      color: white;
      font-size: 0.8rem;
      padding: 4px 8px;
      border-radius: 4px;
    }

    .expiry-date {
      font-size: 0.8rem;
      color: var(--gray-700);
      margin-top: 5px;
    }

    .expiry-date.expired {
      color: var(--danger);
      font-weight: bold;
    }

    .job-details {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 15px;
    }

    .job-detail {
      display: flex;
      align-items: center;
      color: var(--gray-700);
      font-size: 0.9rem;
    }

    .job-detail i {
      margin-right: 5px;
      color: var(--primary);
    }

    .job-description {
      color: var(--gray-700);
      margin-bottom: 20px;
      flex-grow: 1;
    }

    .job-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 20px;
    }

    .job-tag {
      background: var(--gray-100);
      color: var(--gray-700);
      padding: 5px 10px;
      border-radius: 20px;
      font-size: 0.8rem;
    }

    .job-actions {
      display: flex;
      gap: 10px;
    }

    .apply-btn {
      background: var(--primary);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 500;
      flex-grow: 1;
    }

    .apply-btn:hover {
      background: var(--primary-dark);
    }

    .apply-btn:disabled {
      background: var(--gray-300);
      cursor: not-allowed;
    }

    .save-btn {
      background: var(--gray-100);
      color: var(--gray-700);
      border: none;
      padding: 10px;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .save-btn:hover {
      background: var(--gray-200);
    }

    .save-btn.saved {
      color: var(--danger);
    }

    .employer-actions {
      display: flex;
      gap: 8px;
      margin-top: 10px;
    }

    .edit-btn, .delete-btn {
      padding: 6px 12px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.8rem;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .edit-btn {
      background: var(--primary-light);
      color: var(--primary);
    }

    .edit-btn:hover {
      background: var(--primary);
      color: white;
    }

    .delete-btn {
      background: rgba(239, 68, 68, 0.1);
      color: var(--danger);
    }

    .delete-btn:hover {
      background: var(--danger);
      color: white;
    }

    /* Pagination */
    .pagination {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 30px;
    }

    .pagination button {
      background: white;
      color: var(--gray-700);
      border: 1px solid var(--gray-300);
      padding: 8px 15px;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .pagination button:hover {
      background: var(--gray-100);
    }

    .pagination button.active {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    /* Footer */
    .footer {
      background: var(--gray-900);
      color: white;
      padding: 40px 0;
      margin-top: 60px;
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 30px;
      padding: 0 30px;
    }

    .footer-section h3 {
      margin-bottom: 20px;
      font-size: 1.2rem;
    }

    .footer-section p, .footer-section a {
      color: var(--gray-200);
      margin-bottom: 10px;
      display: block;
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .footer-section a:hover {
      color: white;
    }

    .footer-bottom {
      text-align: center;
      padding-top: 30px;
      border-top: 1px solid rgba(255,255,255,0.1);
      margin-top: 30px;
      color: var(--gray-200);
      font-size: 0.9rem;
    }

    /* Auth Modals */
    .auth-modal, .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    .auth-modal-content, .modal-content {
      background: white;
      padding: 30px;
      border-radius: 12px;
      width: 90%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 10px 25px rgba(0,0,0,0.2);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .modal-header h2 {
      color: var(--primary);
      margin: 0;
    }

    .close-modal {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--gray-700);
    }

    .auth-tabs {
      display: flex;
      margin-bottom: 20px;
      border-bottom: 1px solid var(--gray-300);
    }

    .auth-tab {
      flex: 1;
      padding: 10px;
      text-align: center;
      background: none;
      border: none;
      cursor: pointer;
      font-weight: 500;
      color: var(--gray-700);
      border-bottom: 2px solid transparent;
    }

    .auth-tab.active {
      color: var(--primary);
      border-bottom-color: var(--primary);
    }

    .auth-form {
      display: none;
    }

    .auth-form.active {
      display: block;
    }

    .user-type-selection {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
    }

    .user-type-btn {
      flex: 1;
      padding: 10px;
      border: 2px solid var(--gray-300);
      border-radius: 6px;
      background: white;
      cursor: pointer;
      text-align: center;
      transition: all 0.3s ease;
    }

    .user-type-btn.selected {
      border-color: var(--primary);
      background: var(--primary-light);
      color: var(--primary);
    }

    .user-type-btn i {
      display: block;
      font-size: 1.5rem;
      margin-bottom: 5px;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
      color: var(--gray-700);
    }

    .form-group input, .form-group select, .form-group textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid var(--gray-300);
      border-radius: 6px;
      font-family: 'Poppins', sans-serif;
    }

    .form-group textarea {
      resize: vertical;
      min-height: 100px;
    }

    .form-actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-top: 20px;
    }

    .form-actions button {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .form-actions .submit-btn {
      background: var(--secondary);
      color: white;
    }

    .form-actions .cancel-btn {
      background: var(--gray-300);
      color: var(--gray-700);
    }

    .form-actions button:hover {
      opacity: 0.9;
      transform: translateY(-2px);
    }

    /* Toast Notification */
    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--gray-900);
      color: white;
      padding: 15px 25px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      gap: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      transform: translateY(100px);
      opacity: 0;
      transition: all 0.3s;
      z-index: 1001;
    }

    .toast.show {
      transform: translateY(0);
      opacity: 1;
    }

    .toast.success {
      background: var(--secondary);
    }

    .toast.error {
      background: var(--danger);
    }

    /* Responsive Design */
    @media (max-width: 900px) {
      .navbar {
        padding: 15px 20px;
      }
      
      .navbar .links {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: var(--primary);
        flex-direction: column;
        padding: 20px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      }
      
      .navbar .links.active {
        display: flex;
      }
      
      .navbar .links a {
        margin: 8px 0;
        text-align: center;
      }

      .dropdown {
        width: 100%;
        margin: 8px 0;
      }
    
      .dropdown-toggle {
          justify-content: center;
          margin: 0;
      }
      
      .dropdown-menu {
          left: 50%;
          transform: translateX(-50%) translateY(10px);
          width: 90%;
      }
      
      .dropdown-menu.show {
          transform: translateX(-50%) translateY(0);
      }
      
      .mobile-menu-btn {
        display: block;
      }
      
      .main-container {
        padding: 0 15px;
      }
      
      .job-listings {
        grid-template-columns: 1fr;
      }
      
      .navbar .auth-buttons {
        display: none;
      }
      
      /* Show auth buttons in mobile menu */
      .navbar .links.active + .auth-buttons {
        display: flex;
        flex-direction: column;
        position: absolute;
        top: calc(100% + 200px);
        left: 0;
        right: 0;
        background: var(--primary);
        padding: 20px;
        gap: 10px;
      }
      
      .navbar .links.active + .auth-buttons button {
        width: 100%;
        text-align: center;
        margin: 5px 0;
      }
    }

    @media (max-width: 600px) {
      .navbar .auth-buttons {
        display: none;
      }
      
      .filter-options {
        grid-template-columns: 1fr;
      }
      
      .job-card-header {
        flex-direction: column;
      }
      
      .featured-badge {
        align-self: flex-start;
        margin-top: 10px;
      }

      .employer-section {
        padding: 30px 20px;
      }

      .user-info {
        display: none !important;
      }

      .employer-actions {
        flex-direction: column;
      }
    }
  </style>
</head>
<body class="user-jobseeker">

  <!-- Navbar -->
  <div class="navbar">
    <div class="logo">
      <a href="/">
        <img src="{{ url_for('static', filename='images/logo.png') }}" alt="CVision Logo">
      </a>
    </div>

    <div class="links">
      <a href="/">Dashboard</a>

      <div class="dropdown">
          <a href="#" class="dropdown-toggle">
              Resume Analyzer <i class="fas fa-chevron-down"></i>
          </a>
          <div class="dropdown-menu">
              <a href="/resume-analyzer" class="dropdown-item">Resume Analyzer</a>
              <a href="/recruiter_analyzer" class="dropdown-item">Recruiter Analyzer</a>
              <a href="/shortlisted" class="dropdown-item">Shortlisted</a>
          </div>
      </div>
      <a href="/job-matcher">Job Matcher</a>
      <a href="/jobs" class="active">Jobs</a>
      <a href="/profile">My Profile</a>
    </div>
    
    <button class="mobile-menu-btn">
      <i class="fas fa-bars"></i>
    </button>
    
    <div class="auth-buttons">
      <button class="post-job" id="postJobBtn">Post a Job</button>
      <button id="loginBtn">Log in</button>
      <button class="signup" id="signupBtn">Sign up</button>
    </div>

    <div class="user-info">
      <div class="user-avatar" id="userAvatar">JS</div>
      <div>
        <div id="userName">Job Seeker</div>
        <div class="user-role" id="userRole">Job Seeker</div>
      </div>
      <button id="logoutBtn" style="background: none; border: none; color: white; margin-left: 10px; cursor: pointer;">
        <i class="fas fa-sign-out-alt"></i>
      </button>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-container">
    <!-- Page Header -->
    <div class="page-header">
      <h1>Job Listings</h1>
      <p>Explore tailored career opportunities chosen just for you</p>
    </div>

    <!-- Employer Section -->
    <div class="employer-section">
      <h2>Are you an employer?</h2>
      <p>Reach thousands of qualified candidates by posting your job openings on CVision. Our AI-powered platform matches your requirements with the perfect candidates.</p>
      <button class="post-job-btn" id="postJobBtn2">Post a Job for Free</button>
    </div>

    <!-- Filters Section -->
    <div class="filters">
      <h2>Filter Jobs</h2>
      <div class="filter-options">
        <div class="filter-group">
          <label for="location">Location</label>
          <select id="location">
            <option value="">All Locations</option>
            <option value="kuala-lumpur">Kuala Lumpur</option>
            <option value="penang">Penang</option>
            <option value="johor">Johor</option>
            <option value="selangor">Selangor</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="category">Category</label>
          <select id="category">
            <option value="">All Categories</option>
            <option value="technology">Technology</option>
            <option value="marketing">Marketing</option>
            <option value="finance">Finance</option>
            <option value="hr">Human Resources</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="type">Job Type</label>
          <select id="type">
            <option value="">All Types</option>
            <option value="full-time">Full Time</option>
            <option value="part-time">Part Time</option>
            <option value="contract">Contract</option>
            <option value="internship">Internship</option>
          </select>
        </div>

        <div class="filter-group">
          <label for="status">Job Status</label>
          <select id="status">
            <option value="">All Jobs</option>
            <option value="active">Active Only</option>
            <option value="expired">Expired</option>
          </select>
        </div>
      </div>
      
      <div class="search-box">
        <input type="text" id="searchInput" placeholder="Search for jobs, companies, or keywords...">
        <button type="button" id="searchButton"><i class="fas fa-search"></i></button>
      </div>
    </div>

    <!-- Job Listings -->
    <div class="job-listings" id="jobListingsContainer">
      <!-- Job cards will be populated by JavaScript -->
    </div>

    <!-- Pagination -->
    <div class="pagination">
      <button><i class="fas fa-chevron-left"></i></button>
      <button class="active">1</button>
      <button>2</button>
      <button>3</button>
      <button><i class="fas fa-chevron-right"></i></button>
    </div>
  </div>

  <!-- Auth Modal -->
  <div class="auth-modal" id="authModal">
    <div class="auth-modal-content">
      <div class="auth-tabs">
        <button class="auth-tab active" data-tab="login">Login</button>
        <button class="auth-tab" data-tab="signup">Sign Up</button>
      </div>

      <!-- Login Form -->
      <form class="auth-form active" id="loginForm">
        <div class="form-group">
          <label for="loginEmail">Email</label>
          <input type="email" id="loginEmail" placeholder="Enter your email" required>
        </div>
        
        <div class="form-group">
          <label for="loginPassword">Password</label>
          <input type="password" id="loginPassword" placeholder="Enter your password" required>
        </div>
        
        <button type="submit" class="submit-btn" style="width: 100%; margin-top: 15px;">Login</button>
      </form>

      <!-- Signup Form -->
      <form class="auth-form" id="signupForm">
        <div class="form-group">
          <label for="signupName">Full Name</label>
          <input type="text" id="signupName" placeholder="Enter your full name" required>
        </div>
        
        <div class="form-group">
          <label for="signupEmail">Email</label>
          <input type="email" id="signupEmail" placeholder="Enter your email" required>
        </div>
        
        <div class="form-group">
          <label for="signupPassword">Password</label>
          <input type="password" id="signupPassword" placeholder="Create a password" required>
        </div>

        <div class="form-group">
          <label>I am a:</label>
          <div class="user-type-selection">
            <button type="button" class="user-type-btn selected" data-role="jobseeker">
              <i class="fas fa-user-graduate"></i>
              Job Seeker
            </button>
            <button type="button" class="user-type-btn" data-role="employer">
              <i class="fas fa-briefcase"></i>
              Employer
            </button>
          </div>
          <input type="hidden" id="userRoleInput" value="jobseeker" required>
        </div>
        
        <button type="submit" class="submit-btn" style="width: 100%; margin-top: 15px;">Create Account</button>
      </form>
    </div>
  </div>

  <!-- Post Job Modal -->
  <div class="modal" id="postJobModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="postJobModalTitle">Post a Job</h2>
        <button class="close-modal">&times;</button>
      </div>
      
      <form id="postJobForm">
        <input type="hidden" id="editJobId">
        
        <div class="form-group">
          <label for="jobTitle">Job Title</label>
          <input type="text" id="jobTitle" placeholder="e.g. Frontend Developer" required>
        </div>
        
        <div class="form-group">
          <label for="companyName">Company Name</label>
          <input type="text" id="companyName" placeholder="e.g. Tech Solutions Inc." required>
        </div>
        
        <div class="form-group">
          <label for="jobLocation">Location</label>
          <input type="text" id="jobLocation" placeholder="e.g. Kuala Lumpur" required>
        </div>
        
        <div class="form-group">
          <label for="jobType">Job Type</label>
          <select id="jobType" required>
            <option value="">Select Job Type</option>
            <option>Full-Time</option>
            <option>Part-Time</option>
            <option>Contract</option>
            <option>Internship</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="salaryRange">Salary Range (RM)</label>
          <input type="text" id="salaryRange" placeholder="e.g. 4000 - 6000">
        </div>
        
        <div class="form-group">
          <label for="expiryDate">Expiry Date</label>
          <input type="date" id="expiryDate" required>
        </div>
        
        <div class="form-group">
          <label for="requiredSkills">Required Skills (comma separated)</label>
          <input type="text" id="requiredSkills" placeholder="e.g. JavaScript, React, CSS">
        </div>
        
        <div class="form-group">
          <label for="jobDescription">Job Description</label>
          <textarea id="jobDescription" placeholder="Describe the role, responsibilities, and requirements..." required></textarea>
        </div>
        
        <div class="form-actions">
          <button type="button" class="cancel-btn">Cancel</button>
          <button type="submit" class="submit-btn" id="postJobSubmitBtn">Post Job</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Job Application Modal -->
  <div class="modal" id="jobApplicationModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="applicationJobTitle">Apply for Job</h2>
        <button class="close-modal" id="closeApplicationModal">&times;</button>
      </div>
      
      <form id="jobApplicationForm">
        <input type="hidden" id="applyingJobId">
        
        <div class="form-group">
          <label for="applicantName">Full Name</label>
          <input type="text" id="applicantName" placeholder="Enter your full name" required>
        </div>
        
        <div class="form-group">
          <label for="applicantEmail">Email</label>
          <input type="email" id="applicantEmail" placeholder="Enter your email" required>
        </div>
        
        <div class="form-group">
          <label for="applicantPhone">Phone Number</label>
          <input type="tel" id="applicantPhone" placeholder="Enter your phone number" required>
        </div>
        
        <div class="form-group">
          <label for="applicantResume">Upload Resume</label>
          <input type="file" id="applicantResume" accept=".pdf,.doc,.docx" required>
          <small style="color: var(--gray-700); margin-top: 5px; display: block;">
            Accepted formats: PDF, DOC, DOCX (Max 5MB)
          </small>
        </div>
        
        <div class="form-group">
          <label for="applicantCoverLetter">Cover Letter</label>
          <textarea id="applicantCoverLetter" placeholder="Tell us why you're the perfect candidate for this position..." rows="5"></textarea>
        </div>
        
        <div class="form-group">
          <label for="applicantExperience">Years of Experience</label>
          <select id="applicantExperience" required>
            <option value="">Select experience</option>
            <option value="0-1">0-1 years</option>
            <option value="1-3">1-3 years</option>
            <option value="3-5">3-5 years</option>
            <option value="5-10">5-10 years</option>
            <option value="10+">10+ years</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="applicantNoticePeriod">Notice Period</label>
          <select id="applicantNoticePeriod" required>
            <option value="">Select notice period</option>
            <option value="immediately">Immediately</option>
            <option value="1week">1 week</option>
            <option value="2weeks">2 weeks</option>
            <option value="1month">1 month</option>
            <option value="2months">2 months</option>
            <option value="3months">3 months</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="applicantSalary">Expected Salary (MYR)</label>
          <input type="text" id="applicantSalary" placeholder="e.g. 5000 - 7000">
        </div>
        
        <div class="form-actions">
          <button type="button" class="cancel-btn" id="cancelApplication">Cancel</button>
          <button type="submit" class="submit-btn">Submit Application</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Application Success Modal -->
  <div class="modal" id="applicationSuccessModal">
    <div class="modal-content" style="text-align: center;">
      <div class="modal-header">
        <h2 style="color: var(--secondary);">Application Submitted!</h2>
        <button class="close-modal" id="closeSuccessModal">&times;</button>
      </div>
      
      <div style="padding: 20px 0;">
        <i class="fas fa-check-circle" style="font-size: 4rem; color: var(--secondary); margin-bottom: 20px;"></i>
        <h3 id="successJobTitle" style="margin-bottom: 15px;"></h3>
        <p style="color: var(--gray-700); margin-bottom: 20px;">
          Your application has been submitted successfully. We will review your application and contact you if you're shortlisted.
        </p>
        <p style="font-size: 0.9rem; color: var(--gray-700);">
          You can track your application status in your dashboard.
        </p>
      </div>
      
      <div class="form-actions" style="justify-content: center;">
        <button type="button" class="submit-btn" id="viewApplicationsBtn">View My Applications</button>
        <button type="button" class="cancel-btn" id="closeSuccessBtn">Close</button>
      </div>
    </div>
  </div>

  <!-- Toast Notification -->
  <div class="toast" id="toast">
    <i class="fas fa-check-circle"></i>
    <span id="toastMessage">Operation completed successfully</span>
  </div>

  <!-- Footer -->
  <div class="footer">
    <div class="footer-content">
      <div class="footer-section">
        <h3>About CVision</h3>
        <p>We help job seekers optimize their resumes and find the perfect job matches using AI-powered technology.</p>
      </div>
      
      <div class="footer-section">
        <h3>Quick Links</h3>
        <a href="/dashboard">Dashboard</a>
        <a href="/resume_analyzer">Resume Analyzer</a>
        <a href="/job_matcher">Job Matcher</a>
        <a href="/jobs">Browse Jobs</a>
      </div>
      
      <div class="footer-section">
        <h3>Contact Us</h3>
        <p>Email: support@cvision.com</p>
        <p>Phone: +1 (555) 123-4567</p>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>&copy; 2023 CVision. All rights reserved.</p>
    </div>
  </div>

  <script>
    // User management system
    const userManager = {
      currentUser: null,
      
      init() {
        // Check if user is logged in from localStorage
        const savedUser = localStorage.getItem('currentUser');
        if (savedUser) {
          this.currentUser = JSON.parse(savedUser);
          this.updateUI();
        }
      },
      
      login(userData) {
        this.currentUser = userData;
        localStorage.setItem('currentUser', JSON.stringify(userData));
        this.updateUI();
      },
      
      logout() {
        this.currentUser = null;
        localStorage.removeItem('currentUser');
        this.updateUI();
      },
      
      updateUI() {
        const body = document.body;
        const authButtons = document.querySelector('.auth-buttons');
        const userInfo = document.querySelector('.user-info');
        
        if (this.currentUser) {
          body.classList.add('user-logged-in');
          body.classList.remove('user-jobseeker', 'user-employer');
          body.classList.add(`user-${this.currentUser.role}`);
          
          // Update user info display
          document.getElementById('userName').textContent = this.currentUser.name;
          document.getElementById('userRole').textContent = 
            this.currentUser.role === 'employer' ? 'Employer' : 'Job Seeker';
          document.getElementById('userAvatar').textContent = 
            this.currentUser.name.split(' ').map(n => n[0]).join('').toUpperCase();
          
          authButtons.style.display = 'none';
          userInfo.style.display = 'flex';
        } else {
          body.classList.remove('user-logged-in', 'user-employer');
          body.classList.add('user-jobseeker');
          authButtons.style.display = 'flex';
          userInfo.style.display = 'none';
        }
      },
      
      isEmployer() {
        return this.currentUser && this.currentUser.role === 'employer';
      }
    };

    // Job Management System
    const jobManager = {
      jobs: [],
      currentEditJob: null,
      
      init() {
        this.loadJobsFromStorage();
        this.renderJobs();
        this.setupAutoExpiryCheck();
      },
      
      loadJobsFromStorage() {
        const savedJobs = localStorage.getItem('cv_jobs');
        if (savedJobs) {
          this.jobs = JSON.parse(savedJobs);
        } else {
          // Initialize with demo jobs
          this.jobs = this.getDemoJobs();
          this.saveJobsToStorage();
        }
      },
      
      saveJobsToStorage() {
        localStorage.setItem('cv_jobs', JSON.stringify(this.jobs));
      },
      
      getDemoJobs() {
        const today = new Date();
        const nextWeek = new Date(today);
        nextWeek.setDate(today.getDate() + 7);
        
        const nextMonth = new Date(today);
        nextMonth.setDate(today.getDate() + 30);
        
        const yesterday = new Date(today);
        yesterday.setDate(today.getDate() - 1);
        
        return [
          {
            id: 'job-1',
            title: 'Executive Programme Manager',
            company: 'EPF Malaysia',
            location: 'Kuala Lumpur',
            type: 'Full Time',
            salary: 'MYR 8,000 - 12,000',
            description: 'We are looking for an experienced Programme Manager to organize and coordinate programmes. You will be tasked with developing programmes to support the organization\'s strategic direction.',
            tags: ['Management', 'Finance', 'Leadership'],
            category: 'finance',
            featured: true,
            expiryDate: nextMonth.toISOString().split('T')[0],
            postedBy: 'employer@company.com'
          },
          {
            id: 'job-2',
            title: 'Head of Marketing',
            company: 'ZUS Coffee',
            location: 'Penang',
            type: 'Full Time',
            salary: 'MYR 6,000 - 9,000',
            description: 'ZUS Coffee is seeking a Head of Marketing to develop and implement marketing strategies that promote brand growth and customer engagement.',
            tags: ['Marketing', 'Branding', 'Digital Marketing'],
            category: 'marketing',
            featured: false,
            expiryDate: nextWeek.toISOString().split('T')[0],
            postedBy: 'employer@company.com'
          },
          {
            id: 'job-3',
            title: 'Social Media Content Creator',
            company: 'Digital Media Solutions',
            location: 'Kuala Lumpur',
            type: 'Full Time',
            salary: 'MYR 3,000 - 5,000',
            description: 'Create engaging content for various social media platforms. Develop content strategies to increase engagement and followers.',
            tags: ['Content Creation', 'Social Media', 'Creative'],
            category: 'marketing',
            featured: false,
            expiryDate: yesterday.toISOString().split('T')[0], // Expired job
            postedBy: 'employer@company.com'
          },
          {
            id: 'job-4',
            title: 'SEO Specialist',
            company: 'TechGrowth Marketing',
            location: 'Kuala Lumpur',
            type: 'Full Time',
            salary: 'MYR 5,500 - 8,000',
            description: 'We\'re looking for an SEO Specialist to manage all search engine optimization activities. You will be responsible for managing our SEO strategy.',
            tags: ['SEO', 'Digital Marketing', 'Analytics'],
            category: 'marketing',
            featured: false,
            expiryDate: nextMonth.toISOString().split('T')[0],
            postedBy: 'employer@company.com'
          },
          {
            id: 'job-5',
            title: 'Data Analyst',
            company: 'DataInsight Sdn Bhd',
            location: 'Selangor',
            type: 'Full Time',
            salary: 'MYR 4,500 - 7,000',
            description: 'Analyze data and create reports to help business decisions. Develop and implement databases and data collection systems.',
            tags: ['Data Analysis', 'SQL', 'Python'],
            category: 'technology',
            featured: false,
            expiryDate: nextWeek.toISOString().split('T')[0],
            postedBy: 'employer@company.com'
          },
          {
            id: 'job-6',
            title: 'Internship for Admin',
            company: 'Global Business Inc.',
            location: 'Kuala Lumpur',
            type: 'Internship',
            salary: 'MYR 1,000 - 1,200',
            description: 'We are offering an administrative internship for students or recent graduates looking to gain experience in office administration.',
            tags: ['Administration', 'Internship', 'Office Management'],
            category: 'hr',
            featured: false,
            expiryDate: nextMonth.toISOString().split('T')[0],
            postedBy: 'employer@company.com'
          },
          {
            id: 'job-7',
            title: 'Frontend Developer',
            company: 'Tech Solutions Inc.',
            location: 'Kuala Lumpur',
            type: 'Full Time',
            salary: 'MYR 5,000 - 8,000',
            description: 'We are looking for a skilled Frontend Developer to join our team. You will be responsible for building user interfaces and implementing designs.',
            tags: ['JavaScript', 'React', 'CSS'],
            category: 'technology',
            featured: true,
            expiryDate: nextMonth.toISOString().split('T')[0],
            postedBy: 'employer@company.com'
          },
          {
            id: 'job-8',
            title: 'HR Manager',
            company: 'PeopleFirst Corp',
            location: 'Johor',
            type: 'Full Time',
            salary: 'MYR 6,500 - 9,500',
            description: 'We are seeking an experienced HR Manager to oversee all aspects of human resources practices and processes.',
            tags: ['Human Resources', 'Recruitment', 'Employee Relations'],
            category: 'hr',
            featured: false,
            expiryDate: nextWeek.toISOString().split('T')[0],
            postedBy: 'employer@company.com'
          }
        ];
      },
      
      createJob(jobData) {
        const newJob = {
          id: 'job-' + Date.now(),
          ...jobData,
          postedBy: userManager.currentUser.email
        };
        
        this.jobs.push(newJob);
        this.saveJobsToStorage();
        this.renderJobs();
        this.showToast('Job posted successfully!', 'success');
      },
      
      updateJob(jobId, jobData) {
        const jobIndex = this.jobs.findIndex(job => job.id === jobId);
        if (jobIndex !== -1) {
          this.jobs[jobIndex] = { ...this.jobs[jobIndex], ...jobData };
          this.saveJobsToStorage();
          this.renderJobs();
          this.showToast('Job updated successfully!', 'success');
        }
      },
      
      deleteJob(jobId) {
        this.jobs = this.jobs.filter(job => job.id !== jobId);
        this.saveJobsToStorage();
        this.renderJobs();
        this.showToast('Job deleted successfully!', 'success');
      },
      
      getJobById(jobId) {
        return this.jobs.find(job => job.id === jobId);
      },
      
      isJobExpired(expiryDate) {
        const today = new Date();
        const expiry = new Date(expiryDate);
        return expiry < today;
      },
      
      setupAutoExpiryCheck() {
        // Check for expired jobs every minute
        setInterval(() => {
          this.renderJobs();
        }, 60000);
      },
      
      getFilteredJobs() {
        const locationFilter = document.getElementById('location').value;
        const categoryFilter = document.getElementById('category').value;
        const typeFilter = document.getElementById('type').value;
        const statusFilter = document.getElementById('status').value;
        const searchQuery = document.getElementById('searchInput').value.toLowerCase();
        
        return this.jobs.filter(job => {
          // Filter by location
          if (locationFilter && job.location.toLowerCase() !== locationFilter) {
            return false;
          }
          
          // Filter by category
          if (categoryFilter && job.category !== categoryFilter) {
            return false;
          }
          
          // Filter by type
          if (typeFilter && job.type.toLowerCase() !== typeFilter.toLowerCase()) {
            return false;
          }
          
          // Filter by status
          const isExpired = this.isJobExpired(job.expiryDate);
          if (statusFilter === 'active' && isExpired) {
            return false;
          }
          if (statusFilter === 'expired' && !isExpired) {
            return false;
          }
          
          // Filter by search query
          if (searchQuery) {
            const searchableText = `${job.title} ${job.company} ${job.description} ${job.tags.join(' ')}`.toLowerCase();
            if (!searchableText.includes(searchQuery)) {
              return false;
            }
          }
          
          return true;
        });
      },
      
      renderJobs() {
        const container = document.getElementById('jobListingsContainer');
        const filteredJobs = this.getFilteredJobs();
        
        if (filteredJobs.length === 0) {
          container.innerHTML = `
            <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: var(--gray-500);">
              <i class="fas fa-briefcase" style="font-size: 3rem; margin-bottom: 15px;"></i>
              <h3>No Jobs Found</h3>
              <p>Try adjusting your filters or check back later for new opportunities.</p>
            </div>
          `;
          return;
        }
        
        container.innerHTML = filteredJobs.map(job => {
          const isExpired = this.isJobExpired(job.expiryDate);
          const isOwner = userManager.currentUser && userManager.currentUser.email === job.postedBy;
          const expiryDate = new Date(job.expiryDate);
          const formattedDate = expiryDate.toLocaleDateString('en-US', { 
            year: 'numeric', 
            month: 'short', 
            day: 'numeric' 
          });
          
          return `
            <div class="job-card ${job.featured ? 'featured' : ''} ${isExpired ? 'expired' : ''}" data-job-id="${job.id}">
              <div class="job-card-header">
                <div>
                  <h3 class="job-title">${job.title}</h3>
                  <p class="company">${job.company}</p>
                  <div class="expiry-date ${isExpired ? 'expired' : ''}">
                    <i class="far fa-clock"></i> Expires: ${formattedDate}
                  </div>
                </div>
                ${job.featured ? '<span class="featured-badge">Featured</span>' : ''}
              </div>
              
              <div class="job-details">
                <div class="job-detail">
                  <i class="fas fa-map-marker-alt"></i> ${job.location}
                </div>
                <div class="job-detail">
                  <i class="fas fa-clock"></i> ${job.type}
                </div>
                <div class="job-detail">
                  <i class="fas fa-money-bill-wave"></i> ${job.salary}
                </div>
              </div>
              
              <p class="job-description">${job.description}</p>
              
              <div class="job-tags">
                ${job.tags.map(tag => `<span class="job-tag">${tag}</span>`).join('')}
              </div>
              
              <div class="job-actions">
                <button class="apply-btn" ${isExpired ? 'disabled' : ''}>
                  ${isExpired ? 'Expired' : 'Apply Now'}
                </button>
                <button class="save-btn"><i class="far fa-bookmark"></i></button>
              </div>
              
              ${isOwner ? `
                <div class="employer-actions">
                  <button class="edit-btn" onclick="jobManager.openEditModal('${job.id}')">
                    <i class="fas fa-edit"></i> Edit
                  </button>
                  <button class="delete-btn" onclick="jobManager.deleteJob('${job.id}')">
                    <i class="fas fa-trash"></i> Delete
                  </button>
                </div>
              ` : ''}
            </div>
          `;
        }).join('');
        
        // Re-attach event listeners
        this.attachEventListeners();
      },
      
      attachEventListeners() {
        // Save job functionality
        document.querySelectorAll('.save-btn').forEach(button => {
          button.addEventListener('click', function() {
            this.classList.toggle('saved');
            const icon = this.querySelector('i');
            
            if (this.classList.contains('saved')) {
              icon.className = 'fas fa-bookmark';
              jobManager.showToast('Job saved to your favorites!', 'success');
            } else {
              icon.className = 'far fa-bookmark';
              jobManager.showToast('Job removed from favorites.', 'info');
            }
          });
        });
        
        // Apply button functionality
        document.querySelectorAll('.apply-btn:not(:disabled)').forEach(button => {
          button.addEventListener('click', function() {
            const jobCard = this.closest('.job-card');
            const jobId = jobCard.getAttribute('data-job-id');
            const job = jobManager.getJobById(jobId);
            
            if (job) {
              jobApplicationManager.openApplicationModal(job);
            }
          });
        });
      },
      
      openEditModal(jobId) {
        const job = this.getJobById(jobId);
        if (!job) return;
        
        this.currentEditJob = job;
        
        // Populate form with job data
        document.getElementById('postJobModalTitle').textContent = 'Edit Job';
        document.getElementById('editJobId').value = job.id;
        document.getElementById('jobTitle').value = job.title;
        document.getElementById('companyName').value = job.company;
        document.getElementById('jobLocation').value = job.location;
        document.getElementById('jobType').value = job.type;
        document.getElementById('salaryRange').value = job.salary;
        document.getElementById('expiryDate').value = job.expiryDate;
        document.getElementById('requiredSkills').value = job.tags.join(', ');
        document.getElementById('jobDescription').value = job.description;
        document.getElementById('postJobSubmitBtn').textContent = 'Update Job';
        
        // Show modal
        document.getElementById('postJobModal').style.display = 'flex';
      },
      
      openCreateModal() {
        this.currentEditJob = null;
        
        // Reset form
        document.getElementById('postJobModalTitle').textContent = 'Post a Job';
        document.getElementById('editJobId').value = '';
        document.getElementById('postJobForm').reset();
        
        // Set default expiry date to 30 days from now
        const defaultExpiry = new Date();
        defaultExpiry.setDate(defaultExpiry.getDate() + 30);
        document.getElementById('expiryDate').value = defaultExpiry.toISOString().split('T')[0];
        
        document.getElementById('postJobSubmitBtn').textContent = 'Post Job';
        
        // Show modal
        document.getElementById('postJobModal').style.display = 'flex';
      },
      
      showToast(message, type = 'success') {
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toastMessage');
        
        toastMessage.textContent = message;
        toast.className = 'toast show ' + type;
        
        setTimeout(() => {
          toast.classList.remove('show');
        }, 3000);
      }
    };

    // Job Application functionality
    const jobApplicationManager = {
      currentJob: null,
      
      init() {
        this.setupEventListeners();
      },
      
      setupEventListeners() {
        // Application modal elements
        const jobApplicationModal = document.getElementById('jobApplicationModal');
        const applicationSuccessModal = document.getElementById('applicationSuccessModal');
        const closeApplicationModal = document.getElementById('closeApplicationModal');
        const cancelApplication = document.getElementById('cancelApplication');
        const closeSuccessModal = document.getElementById('closeSuccessModal');
        const closeSuccessBtn = document.getElementById('closeSuccessBtn');
        const viewApplicationsBtn = document.getElementById('viewApplicationsBtn');
        const jobApplicationForm = document.getElementById('jobApplicationForm');
        
        // Close application modal
        closeApplicationModal.addEventListener('click', () => this.closeApplicationModal());
        cancelApplication.addEventListener('click', () => this.closeApplicationModal());
        
        // Close success modal
        closeSuccessModal.addEventListener('click', () => this.closeSuccessModal());
        closeSuccessBtn.addEventListener('click', () => this.closeSuccessModal());
        
        // View applications
        viewApplicationsBtn.addEventListener('click', () => {
          this.closeSuccessModal();
          alert('This would redirect to the applications dashboard in a real implementation.');
        });
        
        // Application form submission
        jobApplicationForm.addEventListener('submit', (e) => this.handleApplicationSubmit(e));
        
        // Close modals when clicking outside
        window.addEventListener('click', (event) => {
          if (event.target === jobApplicationModal) {
            this.closeApplicationModal();
          }
          if (event.target === applicationSuccessModal) {
            this.closeSuccessModal();
          }
        });
      },
      
      openApplicationModal(jobData) {
        this.currentJob = jobData;
        
        // Set job title in modal
        document.getElementById('applicationJobTitle').textContent = `Apply for: ${jobData.title}`;
        document.getElementById('applyingJobId').value = jobData.id;
        
        // Pre-fill user data if logged in
        if (userManager.currentUser) {
          document.getElementById('applicantName').value = userManager.currentUser.name;
          document.getElementById('applicantEmail').value = userManager.currentUser.email;
        }
        
        // Show modal
        document.getElementById('jobApplicationModal').style.display = 'flex';
      },
      
      closeApplicationModal() {
        document.getElementById('jobApplicationModal').style.display = 'none';
        document.getElementById('jobApplicationForm').reset();
        this.currentJob = null;
      },
      
      closeSuccessModal() {
        document.getElementById('applicationSuccessModal').style.display = 'none';
      },
      
      showSuccessModal(jobTitle) {
        document.getElementById('successJobTitle').textContent = jobTitle;
        document.getElementById('applicationSuccessModal').style.display = 'flex';
      },
      
      handleApplicationSubmit(e) {
        e.preventDefault();
        
        if (!userManager.currentUser) {
          alert('Please log in to apply for jobs.');
          this.closeApplicationModal();
          document.getElementById('authModal').style.display = 'flex';
          return;
        }
        
        const formData = {
          jobId: document.getElementById('applyingJobId').value,
          jobTitle: this.currentJob.title,
          company: this.currentJob.company,
          applicantName: document.getElementById('applicantName').value,
          applicantEmail: document.getElementById('applicantEmail').value,
          applicantPhone: document.getElementById('applicantPhone').value,
          applicantExperience: document.getElementById('applicantExperience').value,
          applicantNoticePeriod: document.getElementById('applicantNoticePeriod').value,
          applicantSalary: document.getElementById('applicantSalary').value,
          applicantCoverLetter: document.getElementById('applicantCoverLetter').value,
          resume: document.getElementById('applicantResume').files[0]?.name || 'No file uploaded'
        };
        
        // In a real application, you would send this data to your backend
        console.log('Application submitted:', formData);
        
        // Save application to localStorage for demo purposes
        this.saveApplication(formData);
        
        // Show success modal
        this.closeApplicationModal();
        this.showSuccessModal(this.currentJob.title);
      },
      
      saveApplication(applicationData) {
        // Get existing applications or initialize empty array
        const applications = JSON.parse(localStorage.getItem('jobApplications') || '[]');
        
        // Add new application
        applications.push({
          ...applicationData,
          id: Date.now().toString(),
          appliedDate: new Date().toISOString(),
          status: 'submitted'
        });
        
        // Save back to localStorage
        localStorage.setItem('jobApplications', JSON.stringify(applications));
      }
    };

    document.addEventListener('DOMContentLoaded', function() {
      // Initialize managers
      userManager.init();
      jobManager.init();
      jobApplicationManager.init();
      
      // Auth modal elements
      const authModal = document.getElementById('authModal');
      const loginBtn = document.getElementById('loginBtn');
      const signupBtn = document.getElementById('signupBtn');
      const authTabs = document.querySelectorAll('.auth-tab');
      const authForms = document.querySelectorAll('.auth-form');
      const loginForm = document.getElementById('loginForm');
      const signupForm = document.getElementById('signupForm');
      const userTypeBtns = document.querySelectorAll('.user-type-btn');
      const userRoleInput = document.getElementById('userRoleInput');
      const logoutBtn = document.getElementById('logoutBtn');
      
      // Post job modal elements
      const postJobModal = document.getElementById('postJobModal');
      const postJobBtn = document.getElementById('postJobBtn');
      const postJobBtn2 = document.getElementById('postJobBtn2');
      const closeModal = document.querySelector('.close-modal');
      const cancelBtn = document.querySelector('.cancel-btn');
      const postJobForm = document.getElementById('postJobForm');
      
      // Mobile menu
      const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
      const navLinks = document.querySelector('.navbar .links');
      
      // Filters
      const filterSelects = document.querySelectorAll('.filter-group select');
      const searchInput = document.getElementById('searchInput');
      const searchButton = document.getElementById('searchButton');
      
      // Open auth modal
      function openAuthModal() {
        authModal.style.display = 'flex';
      }
      
      // Close auth modal
      function closeAuthModal() {
        authModal.style.display = 'none';
      }
      
      // Close post job modal
      function closePostJobModal() {
        postJobModal.style.display = 'none';
      }
      
      // Switch between login/signup tabs
      authTabs.forEach(tab => {
        tab.addEventListener('click', function() {
          const tabName = this.getAttribute('data-tab');
          
          // Update active tab
          authTabs.forEach(t => t.classList.remove('active'));
          this.classList.add('active');
          
          // Show corresponding form
          authForms.forEach(form => {
            form.classList.remove('active');
            if (form.id === `${tabName}Form`) {
              form.classList.add('active');
            }
          });
        });
      });
      
      // User type selection
      userTypeBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          const role = this.getAttribute('data-role');
          
          userTypeBtns.forEach(b => b.classList.remove('selected'));
          this.classList.add('selected');
          userRoleInput.value = role;
        });
      });
      
      // Login form submission
      loginForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const email = document.getElementById('loginEmail').value;
        const password = document.getElementById('loginPassword').value;
        
        // In real app, this would be an API call to verify credentials
        // For demo, we'll use mock data
        const mockUsers = [
          { email: 'employer@company.com', password: '123', name: 'John Employer', role: 'employer' },
          { email: 'jobseeker@email.com', password: '123', name: 'Jane Jobseeker', role: 'jobseeker' }
        ];
        
        const user = mockUsers.find(u => u.email === email && u.password === password);
        
        if (user) {
          userManager.login(user);
          closeAuthModal();
          loginForm.reset();
          jobManager.showToast(`Welcome back, ${user.name}!`, 'success');
        } else {
          jobManager.showToast('Invalid email or password. Try: employer@company.com / 123 or jobseeker@email.com / 123', 'error');
        }
      });
      
      // Signup form submission
      signupForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const name = document.getElementById('signupName').value;
        const email = document.getElementById('signupEmail').value;
        const password = document.getElementById('signupPassword').value;
        const role = userRoleInput.value;
        
        // In real app, this would be an API call to create user
        const newUser = {
          name: name,
          email: email,
          role: role,
          // In real app, you wouldn't store password like this
          password: password
        };
        
        userManager.login(newUser);
        closeAuthModal();
        signupForm.reset();
        jobManager.showToast(`Account created successfully! Welcome to CVision, ${name}!`, 'success');
      });
      
      // Logout
      logoutBtn.addEventListener('click', function() {
        userManager.logout();
        jobManager.showToast('You have been logged out.', 'info');
      });
      
      // Post job button click - check if employer
      postJobBtn.addEventListener('click', function() {
        if (!userManager.currentUser) {
          jobManager.showToast('Please log in to post a job.', 'error');
          openAuthModal();
          return;
        }
        
        if (!userManager.isEmployer()) {
          jobManager.showToast('Only employers can post jobs. Please create an employer account.', 'error');
          return;
        }
        
        // If user is employer, open post job modal
        jobManager.openCreateModal();
      });
      
      // Second post job button
      postJobBtn2.addEventListener('click', function() {
        if (!userManager.currentUser) {
          jobManager.showToast('Please log in to post a job.', 'error');
          openAuthModal();
          return;
        }
        
        if (!userManager.isEmployer()) {
          jobManager.showToast('Only employers can post jobs. Please create an employer account.', 'error');
          return;
        }
        
        jobManager.openCreateModal();
      });
      
      // Post job form submission
      postJobForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const jobId = document.getElementById('editJobId').value;
        const jobData = {
          title: document.getElementById('jobTitle').value,
          company: document.getElementById('companyName').value,
          location: document.getElementById('jobLocation').value,
          type: document.getElementById('jobType').value,
          salary: document.getElementById('salaryRange').value,
          expiryDate: document.getElementById('expiryDate').value,
          description: document.getElementById('jobDescription').value,
          tags: document.getElementById('requiredSkills').value.split(',').map(tag => tag.trim()),
          featured: false,
          category: document.getElementById('category').value || 'general'
        };
        
        if (jobId) {
          // Update existing job
          jobManager.updateJob(jobId, jobData);
        } else {
          // Create new job
          jobManager.createJob(jobData);
        }
        
        // Close modal and reset form
        closePostJobModal();
      });
      
      // Close modals
      closeModal.addEventListener('click', closePostJobModal);
      cancelBtn.addEventListener('click', closePostJobModal);
      
      // Event listeners for auth buttons
      loginBtn.addEventListener('click', openAuthModal);
      signupBtn.addEventListener('click', openAuthModal);
      
      // Close modals when clicking outside
      window.addEventListener('click', function(event) {
        if (event.target === authModal) {
          closeAuthModal();
        }
        if (event.target === postJobModal) {
          closePostJobModal();
        }
      });

      // Mobile menu toggle
      mobileMenuBtn.addEventListener('click', function() {
        navLinks.classList.toggle('active');
      });

      // Dropdown menu functionality
      const dropdownToggles = document.querySelectorAll('.dropdown-toggle');
      
      dropdownToggles.forEach(toggle => {
          toggle.addEventListener('click', function(e) {
              e.preventDefault();
              const dropdownMenu = this.nextElementSibling;
              
              // Close all other dropdowns
              document.querySelectorAll('.dropdown-menu').forEach(menu => {
                  if (menu !== dropdownMenu) {
                      menu.classList.remove('show');
                  }
              });
              
              // Toggle current dropdown
              dropdownMenu.classList.toggle('show');
          });
      });
      
      // Close dropdowns when clicking outside
      document.addEventListener('click', function(e) {
          if (!e.target.closest('.dropdown')) {
              document.querySelectorAll('.dropdown-menu').forEach(menu => {
                  menu.classList.remove('show');
              });
          }
      });
      
      // Filter functionality
      function filterJobs() {
        jobManager.renderJobs();
      }
      
      filterSelects.forEach(select => {
        select.addEventListener('change', filterJobs);
      });
      
      searchButton.addEventListener('click', filterJobs);
      searchInput.addEventListener('keyup', function(e) {
        if (e.key === 'Enter') {
          filterJobs();
        }
        // Real-time search as user types
        filterJobs();
      });

      // Demo accounts information
      console.log('Demo accounts:');
      console.log('Employer: employer@company.com / 123');
      console.log('Job Seeker: jobseeker@email.com / 123');
    });
  </script>
</body>
</html>